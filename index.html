<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Device Test 1.20</title>
  <style>
    body {
      font-family: Helvetica, sans-serif;
      margin: 0;
      padding: 0;
      align-items: center;
      background-color: f0f0f0;
    }
    .header {
      background-color: #4CAF50;
      color:white;
      padding: 10px;
      text-align: center
      box-sizing: border-box;
    }
    #mainDiv {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: stretch;
      background-color: #f0f0f0;
      padding: 10px
         border-radius: 8px;
      flex-direction: row;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
    }
    .box {
      max-width: 400px;
      width: 100%;
      background-color: #ffffff;
      border: 3px solid black;
      margin: 2px;
      border: 2px solid #dddddd;
      border-radius: 8px;
      flex-grow: 1;
      display: flex;
      flex-direction:
        column;box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

      min-height: 100px;
      align-items: center;
      justify-content: center;
    }
    button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 10px 20px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }
    select {
    font-family: Helvetica, sans-serif;
    font-size: 16px;
    padding: 10px;
    margin: 10px 0;
    border: 2px solid #dddddd;
    border-radius: 5px;
    background-color: #ffffff;
    color: #333333;
    width: 100%;
    box-sizing: border-box;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    
    select:hover {
        border-color: #4CAF50;
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
    }
    
    select:focus {
        border-color: #4CAF50;
        outline: none;
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.8);
    }
    
    .warning {
      background-color: green;
      width: 100%;
      padding-top: 10px;
      padding-bottom: 10px;
      color: white;
      text-align: center;
      font-weight: bold;
      border-radius: 4px;
    }
    button:hover {
    background-color: #45a049; } 
    
    #visualizer {
      width: 100%;
      height: 120px;
      border-radius: 5px;
      overflow: hidden;
      background-color: green; 

      color: green;
      margin-top: 20px;
    }
    #visualizer canvas {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .camera-box {
      text-align: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
      max-height: 100%;
    }
    .camera-box img {
      max-width: 100%;
      max-height: 400px;
      border: 1px black solid;
    }
    .description {
        font-size: 14px;
        font-family: Arial, sans-serif;
        margin-top: 10px;
        color: #666666;
    }
    .keyboard-key {
        width: 30px;
        height: 30px;
        line-height: 30px;
        text-align: center;
        border: 1px solid #ddd;
        border-radius: 3px;
        background-color: #f0f0f0;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .key-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 5px;
        margin-top: 20px;
    }
    .key-row {
      display: flex;
    }
    .keyboard-key:hover {
    background-color: #e0e0e0;
  </style>
</head>
<body style="margin-right: 10px;" >
<div>
  <div class="warning" style="margin-bottom: 0px;">
    <p>Device Testing 1.20</p>

  </div>
  
  
  <div id="mainDiv">
  
    <!-- Audio/Mic Test Section -->
    <div class="box" style="margin-top: 20px;" >
      <div class="warning">Audio / Microphone Test</div>
      <div>
        <button class="left">&#9664;</button>
        <button class="play">&#9664; &#9654;</button>
        <button class="right">&#9654;</button>
      </div>
      <div style="color: red;">
        <button class="left2">&#9664;</button>
        <button class="play2">&#9664; &#9654;</button>
        <button class="right2">&#9654;</button>
      </div>
      <div style="color: blue;">
        <button class="left3" style="height: 10px;">&#9664;</button>
        <button class="play3">&#9664; &#9654;</button>
        <button class="right3">&#9654;</button>
      </div>
      <div id="visualizer"></div>
     

      <div style="display: flex; align-items: center; justify-content: space-between;">
    <div style="flex: 1; margin-right: 10px;">
      <select id="micSource"> </select>  
    </div>
        <button id="toggleButton" style="flex-shrink: 0; max-width: 200px;" >Pause/Start Mic</button>
</div>
      <div class="warning" style="background-color: orange; font-size: 14px; margin-top: 10px;">Audio Will Only Work if Mic is Paused</div>
    </div>

    <style>
      /* Audio/Mic Test Section CSS */
      #visualizer {
        width: 350px;
        height: 120px;
        background-color: orange;
        border-radius: 4px;
        position: relative;
      }
      #visualizer canvas {
        width: 100%;
        height: 100%;
        border-radius: 4px;
      }
      .warning {
        background-color: green;
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;
        color: white;
        text-align: center;
        font-weight: bold;
        border-radius: 4px;
      }
      #micSource {
        margin-right: 10px;
      }
      button, select {
        min-width: 100px;
      }
      #toggleButton {
        min-width: 200px;
      }
    </style>

    <script>
      // Audio/Mic Test Section Script
      const visualizer = document.getElementById('visualizer');
      const canvas = document.createElement('canvas');
      canvas.width = visualizer.clientWidth;
      canvas.height = visualizer.clientHeight;
      visualizer.appendChild(canvas);
      const canvasCtx = canvas.getContext('2d');

      const AudioContext = window.AudioContext || window.webkitAudioContext;
      let audioContext;
      let mediaStream;
      let analyser;
      let animationFrameId;
      let micActive = false;
      let audioActive = true;

      const micSourceSelect = document.getElementById('micSource');
      const toggleButton = document.getElementById('toggleButton');

      // Populate mic sources
      navigator.mediaDevices.enumerateDevices()
        .then(devices => {
          devices.forEach(device => {
            if (device.kind === 'audioinput') {
              const option = document.createElement('option');
              option.value = device.deviceId;
              option.text = device.label || `Microphone ${micSourceSelect.length + 1}`;
              micSourceSelect.appendChild(option);
            }
          });
        });

      function startAudioContext() {
        if (!audioContext && micActive) {
          audioContext = new AudioContext();
          navigator.mediaDevices.getUserMedia({ 
            audio: {
              deviceId: micSourceSelect.value ? {exact: micSourceSelect.value} : undefined
            }
          })
            .then(function(stream) {
              mediaStream = stream;
              const source = audioContext.createMediaStreamSource(stream);
              analyser = audioContext.createAnalyser();
              source.connect(analyser);

              analyser.fftSize = 256;
              const bufferLength = analyser.frequencyBinCount;
              const dataArray = new Uint8Array(bufferLength);

              canvasCtx.clearRect(0, 0, canvas.width, canvas.height);

              function draw() {
                const WIDTH = canvas.width;
                const HEIGHT = canvas.height;

                animationFrameId = requestAnimationFrame(draw);

                analyser.getByteFrequencyData(dataArray);

                canvasCtx.fillStyle = 'orange';
                canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);

                const barWidth = (WIDTH / bufferLength) * 2.5;
                let x = 0;

                for (let i = 0; i < bufferLength; i++) {
                  const barHeight = dataArray[i];

                  canvasCtx.fillStyle = `#45a049`;
                  canvasCtx.fillRect(x, HEIGHT - barHeight / 2, barWidth, barHeight / 2);

                  x += barWidth + 1;
                }
              }

              draw();
            })
            .catch(function(err) {
              console.error('Error accessing microphone:', err);
            });
        }
      }

      function stopAudioContext() {
        if (audioContext) {
          audioContext.close();
          audioContext = null;
          if (mediaStream) {
            mediaStream.getTracks().forEach(track => track.stop());
          }
          cancelAnimationFrame(animationFrameId);
          canvasCtx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }

      function toggleAudioMic() {
        if (micActive) {
          micActive = false;
          audioActive = true;
          toggleButton.textContent = "Pause / Start Mic";
          stopAudioContext();
        } else {
          micActive = true;
          audioActive = false;
          toggleButton.textContent = "Stop Mic ";
          pauseAllAudio();
          startAudioContext();
        }
      }

      const leftAudio = new Audio('AudioLeft.mp3');
      const rightAudio = new Audio('AudioRight.mp3');
      const playAudio = new Audio('Audio.mp3');

      const leftAudio2 = new Audio('Audio2Left.mp3');
      const rightAudio2 = new Audio('Audio2Right.mp3');
      const playAudio2 = new Audio('Audio2.mp3');

      const leftAudio3 = new Audio('Audio3Left.mp3');
      const rightAudio3 = new Audio('Audio3Right.mp3');
      const playAudio3 = new Audio('Audio3.mp3');

      function pauseAllAudio() {
        leftAudio.pause();
        leftAudio.currentTime = 0;
        rightAudio.pause();
        rightAudio.currentTime = 0;
        playAudio.pause();
        playAudio.currentTime = 0;

        leftAudio2.pause();
        leftAudio2.currentTime = 0;
        rightAudio2.pause();
        rightAudio2.currentTime = 0;
        playAudio2.pause();
        playAudio2.currentTime = 0;

        leftAudio3.pause();
        leftAudio3.currentTime = 0;
        rightAudio3.pause();
        rightAudio3.currentTime = 0;
        playAudio3.pause();
        playAudio3.currentTime = 0;
        
      }

      document.querySelectorAll('.left').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            leftAudio.play();
          }
        });
      });

      document.querySelectorAll('.right').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            rightAudio.play();
          }
        });
      });

      document.querySelectorAll('.play').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            playAudio.play();
          }
        });
      });

      //2

      document.querySelectorAll('.left2').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            leftAudio2.play();
          }
        });
      });

      document.querySelectorAll('.right2').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            rightAudio2.play();
          }
        });
      });

      document.querySelectorAll('.play2').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            playAudio2.play();
          }
        });
      });

      //3

      document.querySelectorAll('.left3').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            leftAudio3.play();
          }
        });
      });

      document.querySelectorAll('.right3').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            rightAudio3.play();
          }
        });
      });

      document.querySelectorAll('.play3').forEach(button => {
        button.addEventListener('click', () => {
          if (audioActive) {
            pauseAllAudio();
            playAudio3.play();
          }
        });
      });

      //

      toggleButton.addEventListener('click', toggleAudioMic);
      micSourceSelect.addEventListener('change', () => {
        if (micActive) {
          stopAudioContext();
          startAudioContext();
        }
      });
    </script>
<div id="mainDiv">
  <!--cameratest-->
  <div class="box" style="height: 500px; margin-top: 20px;">
    <div class="warning">Camera Test</div>
    <div id="video-container">
      <video id="video" autoplay playsinline></video>
    </div>
    <button id="switch-button">Switch Camera</button>

    <style>
      .box {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: 20px;
      }
      .warning {
        background-color: green;
        width: 100%;
        padding: 10px;
        color: white;
        text-align: center;
        font-weight: bold;
        border-radius: 4px;
        margin-bottom: 20px;
      }
      #video-container {
        width: 400px;
        height: 400px;
        background-color: orange;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        border-radius: 8px;
      }
      #video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      #switch-button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
      }
    </style>

    <script>
      const video = document.getElementById('video');
      const switchButton = document.getElementById('switch-button');
      let currentFacingMode = 'user'; // Start with front camera

      function startCamera(facingMode) {
        navigator.mediaDevices.getUserMedia({ video: { facingMode: facingMode } })
          .then(stream => {
            video.srcObject = stream;
            video.style.display = 'block';
          })
          .catch(error => {
            console.error('Error accessing camera:', error);
            video.style.display = 'none';
          });
      }

      switchButton.addEventListener('click', () => {
        // Stop the current stream
        const stream = video.srcObject;
        if (stream) {
          const tracks = stream.getTracks();
          tracks.forEach(track => track.stop());
        }
        // Toggle the camera facing mode
        currentFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';
        startCamera(currentFacingMode);
      });

      // Start the camera initially
      startCamera(currentFacingMode);
    </script>
  </div>
</div>

    <!-- Keyboard Key Tester Section -->
    <div class="box" style="max-width: 600px;">
      <div>
        <div class="warning" style="width:600px;">Keyboard Test</div>
      </div>
      <div class="key-container" id="keyContainer">
        <!-- Keys will be dynamically added here -->
      </div>
    </div>
    <style>
      /* Keyboard Key Tester Section CSS */
      .keyboard-key {
        width: 30px;
        height: 30px;
        margin: 2px;
        display: inline-block;
        text-align: center;
        line-height: 30px;
        border: 1px solid black;
        background-color: white;
      }
      .keyboard-key.wide {
        width: 60px;
      }
      .keyboard-key.space {
        width: 200px;
      }
      .key-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
      }
      .key-row {
        display: flex;
      }
    </style>
    <script>
      // Keyboard Key Tester Section Script
      const keyContainer = document.getElementById('keyContainer');

      const keyLayout = [
        ['Esc', 'F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8', 'F9', 'F10', 'F11', 'F12'],
        ['`', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace'],
        ['Tab', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', '[', ']', '\\'],
        ['CapsLock', 'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', ';', '\'', 'Enter'],
        ['Shift', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', ',', '.', '/', 'ShiftRight', 'ArrowUp'],
        ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Win', 'Menu', 'Ctrl', 'ArrowLeft', 'ArrowDown', 'ArrowRight']
      ];

      keyLayout.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.classList.add('key-row');
        row.forEach(key => {
          const keyDiv = document.createElement('div');
          keyDiv.classList.add('keyboard-key');
          if (key === 'Backspace' || key === 'Tab' || key === 'CapsLock' || key === 'Enter' || key === 'Shift' || key === 'ShiftRight' || key === 'Space') {
            keyDiv.classList.add('wide');
          }
          if (key === 'Space') {
            keyDiv.classList.add('space');
          }
          keyDiv.textContent = key;
          keyDiv.id = `key-${key.toUpperCase()}`;
          rowDiv.appendChild(keyDiv);
        });
        keyContainer.appendChild(rowDiv);
      });

      const keyMap = {};
      keyLayout.flat().forEach(key => {
        keyMap[key.toUpperCase()] = document.getElementById(`key-${key.toUpperCase()}`);
      });

      document.addEventListener('keydown', (event) => {
        const key = event.key.toUpperCase();
        const keyDiv = keyMap[key];
        if (keyDiv) {
          keyDiv.style.backgroundColor = 'orange';
        }
      });

      document.addEventListener('keyup', (event) => {
        const key = event.key.toUpperCase();
        const keyDiv = keyMap[key];
        if (keyDiv) {
          keyDiv.style.backgroundColor = 'green';
        }
      });
    </script>

    <!-- Miscellaneous Section -->
    <div class="box" style="max-width: 200px; paddding: 10px;margin-top:13px;" >
      <div class="warning">:)</div>
    </div>
  </div>
</div>
</body>
</html>
